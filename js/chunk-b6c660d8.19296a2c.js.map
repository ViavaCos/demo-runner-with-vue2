{"version":3,"sources":["webpack:///./src/views/lazy-img/index.vue?3023","webpack:///./src/views/lazy-img/index.vue?6096","webpack:///src/views/lazy-img/index.vue","webpack:///./src/views/lazy-img/index.vue?4487","webpack:///./src/views/lazy-img/index.vue"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","attrs","component"],"mappings":"gHAAA,W,gECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAsBH,EAAII,MAAMC,GAAO,OAAOL,EAAIM,GAAG,IACnGC,EAAkB,CAAC,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBE,EAAGL,EAAII,MAAMC,IAAIH,EAAG,OAAOG,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,MAAM,CAACG,YAAY,aAAaC,MAAM,CAAC,WAAW,8FAA8F,IAAM,QAAQJ,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,MAAM,CAACG,YAAY,aAAaC,MAAM,CAAC,WAAW,8FAA8F,IAAM,QAAQJ,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,MAAM,CAACG,YAAY,aAAaC,MAAM,CAAC,WAAW,8FAA8F,IAAM,QAAQJ,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,MAAM,CAACG,YAAY,aAAaC,MAAM,CAAC,WAAW,8FAA8F,IAAM,YCoBr5B,GACE,KAAF,WACE,QAFF,WAII,KAAJ,gDAEI,SAAJ,8CAEE,QAAF,CACI,aADJ,SACA,GAAM,IAAN,OACM,IAAN,kBAAM,CAEA,IAAN,iCAKA,oBAGA,uGAEU,KAAV,uDAIM,KAAN,oCACQ,aAAR,gBACQ,EAAR,oBACA,QAGE,cAhCF,WAkCI,SAAJ,oDCvD8V,I,wBCQ1VC,EAAY,eACd,EACAX,EACAQ,GACA,EACA,KACA,WACA,MAIa,aAAAG,E","file":"js/chunk-b6c660d8.19296a2c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=906a0cf4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lazy-img\"},[_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"a-lazy-img\",attrs:{\"data-src\":\"https://raw.githubusercontent.com/ViavaCos/demo-runner-with-vue2/main/src/assets/imgs/1.jpg\",\"alt\":\"\"}})]),_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"a-lazy-img\",attrs:{\"data-src\":\"https://raw.githubusercontent.com/ViavaCos/demo-runner-with-vue2/main/src/assets/imgs/2.jpg\",\"alt\":\"\"}})]),_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"a-lazy-img\",attrs:{\"data-src\":\"https://raw.githubusercontent.com/ViavaCos/demo-runner-with-vue2/main/src/assets/imgs/3.jpg\",\"alt\":\"\"}})]),_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"a-lazy-img\",attrs:{\"data-src\":\"https://raw.githubusercontent.com/ViavaCos/demo-runner-with-vue2/main/src/assets/imgs/4.jpg\",\"alt\":\"\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"lazy-img\">\n    <div class=\"img-wrap\">\n        <img class=\"a-lazy-img\" data-src=\"https://raw.githubusercontent.com/ViavaCos/demo-runner-with-vue2/main/src/assets/imgs/1.jpg\" alt=\"\">\n    </div>\n\n    <div class=\"img-wrap\">\n        <img class=\"a-lazy-img\" data-src=\"https://raw.githubusercontent.com/ViavaCos/demo-runner-with-vue2/main/src/assets/imgs/2.jpg\" alt=\"\">\n    </div>\n\n    <div class=\"img-wrap\">\n        <img class=\"a-lazy-img\" data-src=\"https://raw.githubusercontent.com/ViavaCos/demo-runner-with-vue2/main/src/assets/imgs/3.jpg\" alt=\"\">\n    </div>\n\n    <div class=\"img-wrap\">\n        <img class=\"a-lazy-img\" data-src=\"https://raw.githubusercontent.com/ViavaCos/demo-runner-with-vue2/main/src/assets/imgs/4.jpg\" alt=\"\">\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n    name: 'lazy-img',\n    mounted(){\n        // 获取懒加载图片的页面元素\n        this.allImg = document.querySelectorAll('.a-lazy-img')\n        // 为滚动事件添加事件处理函数\n        document.addEventListener('scroll', this.bindScrollFn)\n    },\n    methods:{\n        bindScrollFn(e){\n            if(this.throttleFlag) return\n            // console.log(e.target.scrollingElement.scrollTop);\n            for (let index = 0; index < this.allImg.length; index++) {\n                // console.log(ele.offsetTop);\n                // console.log(this.allImg[index].src);\n\n                // 若已有图片连接，则跳过本次循环\n                if(this.allImg[index].src) continue\n\n                // 若滚动元素滚动距离 + 滚动元素高度 >= 图片元素距顶部偏移量 (意味着页面中看到当前图片元素了)\n                if(e.target.scrollingElement.scrollTop + e.target.scrollingElement.clientHeight >= this.allImg[index].offsetTop){\n                    // 将自定义属性中的图片链接赋值给img元素\n                    this.allImg[index].src = this.allImg[index].getAttribute('data-src')\n                }\n            }\n            // 节流\n            this.throttleFlag = setTimeout(() => {\n                clearTimeout(this.throttleFlag)\n                this.throttleFlag = null\n            }, 500)\n        }\n    },\n    beforeDestroy(){\n        // 页面销毁前解除事件处理函数绑定\n        document.removeEventListener('scroll', this.bindScrollFn())\n    }\n}\n</script>\n\n<style scoped>\n.img-wrap {\n    margin: 1024px auto 0;\n    width: 198px;\n    height: 198px;\n    line-height: 198px;\n    background-color: #ccc;\n}\nimg {\n    max-width: 198px;\n    vertical-align: middle;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=906a0cf4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=906a0cf4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"906a0cf4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}